<div class="preview-container" *ngIf="hasPhoto()">
  <div class="preview-header">
    <h3 class="section-title">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ</h3>
    <div class="preview-actions" *ngIf="!isAnalyzing">
      <button 
        class="action-button replace-button" 
        (click)="onReplacePhoto()"
        type="button"
        title="–ó–∞–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ"
      >
        <span class="button-icon">üîÑ</span>
        –ó–∞–º–µ–Ω–∏—Ç—å
      </button>
      <button 
        class="action-button remove-button" 
        (click)="onRemovePhoto()"
        type="button"
        title="–£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ"
      >
        <span class="button-icon">üóëÔ∏è</span>
        –£–¥–∞–ª–∏—Ç—å
      </button>
    </div>
  </div>

  <div class="photo-preview" [class.analyzing]="isAnalyzing">
    <!-- Image Container -->
    <div class="image-container">
      <img 
        [src]="uploadedFile!.previewUrl" 
        [alt]="uploadedFile!.file.name"
        class="preview-image"
        loading="lazy"
      />
      
      <!-- Analysis Overlay -->
      <div class="analysis-overlay" *ngIf="isAnalyzing">
        <div class="analysis-content">
          <div class="analysis-spinner"></div>
          <p class="analysis-text">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º...</p>
        </div>
      </div>
    </div>

    <!-- Photo Info -->
    <div class="photo-info">
      <div class="file-details">
        <div class="file-name">
          <span class="file-icon">üì∑</span>
          <span class="name-text">{{ uploadedFile!.file.name }}</span>
        </div>
        
        <div class="file-meta">
          <div class="meta-item">
            <span class="meta-label">–†–∞–∑–º–µ—Ä:</span>
            <span class="meta-value">{{ formatFileSize(uploadedFile!.file.size) }}</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">–¢–∏–ø:</span>
            <span class="meta-value">{{ getFileExtension(uploadedFile!.file.name) }}</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">–ó–∞–≥—Ä—É–∂–µ–Ω–æ:</span>
            <span class="meta-value">{{ formatUploadTime(uploadedFile!.uploadTimestamp) }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>