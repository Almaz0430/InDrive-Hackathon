<div class="results-container" *ngIf="hasResults() || isAnalyzing">
  <!-- Loading State -->
  <div class="loading-container" *ngIf="isAnalyzing">
    <div class="loading-content">
      <lucide-icon [img]="LoaderIcon" class="loading-spinner"></lucide-icon>
      <h3 class="loading-title">Проверка...</h3>
      <p class="loading-subtitle">Анализируем состояние автомобиля</p>
    </div>
  </div>

  <!-- Results Display -->
  <div class="results-content" *ngIf="hasResults()">
    <div class="results-header">
      <h3 class="section-title">Результаты анализа</h3>
      <p class="analysis-time">
        Время анализа: {{ formatTimestamp(result!.timestamp) }}
      </p>
    </div>

    <div class="results-grid">
      <!-- Cleanliness Result -->
      <div class="result-card cleanliness-card">
        <div class="result-header">
          <lucide-icon [img]="SparklesIcon" class="result-icon"></lucide-icon>
          <div class="result-info">
            <h4 class="result-label">Чистота</h4>
            <p class="result-description">Состояние кузова автомобиля</p>
          </div>
        </div>
        
        <div class="result-value" [class]="getCleanlinessClass()">
          {{ result!.cleanliness.displayText }}
        </div>
        
        <div class="result-confidence">
          <span class="confidence-label">Уверенность:</span>
          <span class="confidence-value">{{ formatConfidence(result!.cleanliness.confidence) }}</span>
        </div>
      </div>

      <!-- Integrity Result -->
      <div class="result-card integrity-card">
        <div class="result-header">
          <lucide-icon [img]="ShieldIcon" class="result-icon"></lucide-icon>
          <div class="result-info">
            <h4 class="result-label">Целостность</h4>
            <p class="result-description">Наличие повреждений</p>
          </div>
        </div>
        
        <div class="result-value" [class]="getIntegrityClass()">
          {{ result!.integrity.displayText }}
        </div>
        
        <div class="result-confidence">
          <span class="confidence-label">Уверенность:</span>
          <span class="confidence-value">{{ formatConfidence(result!.integrity.confidence) }}</span>
        </div>
      </div>
    </div>

    <!-- Overall Assessment -->
    <div class="overall-assessment">
      <div class="assessment-card" [class]="analysisService.isPositiveResult(result!) ? 'positive' : 'negative'">
        <lucide-icon 
          [img]="analysisService.isPositiveResult(result!) ? CheckIcon : AlertIcon" 
          class="assessment-icon">
        </lucide-icon>
        <div class="assessment-text">
          <h4 class="assessment-title">
            {{ analysisService.isPositiveResult(result!) ? 'Отличное состояние' : 'Требует внимания' }}
          </h4>
          <p class="assessment-description">
            {{ analysisService.isPositiveResult(result!) 
              ? 'Автомобиль в хорошем состоянии' 
              : 'Обнаружены проблемы, требующие внимания' }}
          </p>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button 
        class="btn btn-secondary reset-button" 
        (click)="onReset()"
        type="button"
      >
        <lucide-icon [img]="ResetIcon" class="button-icon"></lucide-icon>
        Загрузить новое фото
      </button>
    </div>
  </div>
</div>

